<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Contacts</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>
<body>
   <h2 align="center">Contacts</h2>

   <div id="accordion">
       <div class="card">
           <div class="card-header" id="contacts">
               <h4 class="mb-0">
                  <p>External Contacts</p>
               </h4>
               <h5 class="mb-0" align="right">
                   <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                       Expand/collapse
                   </button>
               </h5>
           </div>

           <div id="collapseOne" class="collapse show" aria-labelledby="contacts" data-parent="#accordion">
               <div class="card-body">
                   <div class="container" id="demo">
                       <div ng-app="myApp" ng-controller="contactsCtrl">
                           <div id="accordion-2">
                               <div class="card">
                                   <div class="card-header" id="addContact">
                                       <h5 class="mb-0">
                                           <button class="btn btn-link" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                                               Add Contact
                                           </button>
                                       </h5>
                                   </div>

                                   <div id="collapseTwo" class="collapse" aria-labelledby="addContact" data-parent="#accordion-2">
                                       <div class="card-body">
                                           <form ng-submit="addRow()">
                                               <div class="form-row">
                                                   <div class="col"><input type="text" ng-model="new.type" size="15"
                                                                                class="form-control" placeholder="Type" required></div>
                                                   <div class="col"><input type="text" ng-model="new.name" size="15"
                                                                                class="form-control" placeholder="Name" required></div>
                                                   <div class="col"><input type="text" ng-model="new.title" size="15"
                                                                                class="form-control" placeholder="Title" required></div>
                                               </div>
                                               <br />
                                               <div class="form-row">
                                                   <div class="col-md-3"><input type="text" ng-model="new.phone" size="15"
                                                                                class="form-control" placeholder="Add Phone" required></div>
                                                   <div class="col-md-2"><input type="text" ng-model="new.ext" size="15"
                                                                                class="form-control" placeholder="Add Ext."></div>
                                                   <div class="col-md-3"><input type="text" ng-model="new.fax" size="15"
                                                                                class="form-control" placeholder="Add Fax"></div>
                                                   <div class="col-md-4"><input type="email" ng-model="new.email" size="20"
                                                                                class="form-control" placeholder="Add Email" required></div>
                                               </div>
                                               <br />
                                                   <div class="form-row" align="right">
                                                       <button type="submit" class="btn btn-primary">Add Contact</button>
                                               </div>
                                           </form>
                                       </div>
                                   </div>
                               </div>
                           </div>


                           <table class="table table-bordered table-striped">
                               <thead>
                               <tr>
                                   <th></th>
                                   <th style="color: #2aabd2">Type</th>
                                   <th style="color: #2aabd2">Name</th>
                                   <th style="color: #2aabd2">Title</th>
                                   <th style="color: #2aabd2">Phone</th>
                                   <th style="color: #2aabd2">Ext.</th>
                                   <th style="color: #2aabd2">Fax</th>
                                   <th style="color: #2aabd2">Email</th>
                               </tr>
                               </thead>
                               <tbody>
                               <tr ng-repeat="x in contacts">
                                   <td><input type="checkbox" ng-model="x.selected"></td>
                                   <td>{{ x.type }}</td>
                                   <td>{{ x.name }}</td>
                                   <td>{{ x.title }}</td>
                                   <td>{{ x.phone }}</td>
                                   <td>{{ x.ext }}</td>
                                   <td>{{ x.fax }}</td>
                                   <td>{{ x.email }}</td>
                               </tr>
                               </tbody>
                           </table>
                           <button class="btn btn-default" ng-click="deleteRows()">Delete selected contact</button>
                       </div>
                   </div>
               </div>
           </div>
       </div>
   </div>




   <script>
       var app = angular.module('myApp', []);

       app.controller('contactsCtrl', function($scope, $http) {
           $http({
               method : "GET",
               url : "https://private-abc54-contacts52.apiary-mock.com/questions"
           }).then(function mySuccess(response) {
               $scope.contacts = response.data;
           }, function myError(response) {
               $scope.contacts = response.statusText;
           });
           $scope.new ={};
           $scope.addRow = function(){
               $scope.contacts.push({
                   type: $scope.new.type, name: $scope.new.name, title: $scope.new.title,
                   phone: $scope.new.phone, ext: $scope.new.ext, fax: $scope.new.fax, email: $scope.new.email
               });
               $scope.new = {};
           };

           $scope.deleteRows = function() {
               $scope.contacts = ($scope.contacts).filter(function(x) {
                   return (!x.selected === true);
               });
           };
       });
   </script>

</body>
</html>